#!/bin/bash
#SBATCH --job-name=Qwen_5000_base
#SBATCH -A csds438                   # your account
#SBATCH -p markov_gpu                # GPU partition
#SBATCH -C gpu4090                   # RTX 4090 node
#SBATCH -N 1                         # 1 node
#SBATCH -n 1                         # 1 task
#SBATCH --gres=gpu:1                 # 1 GPU
#SBATCH --cpus-per-task=2            # 2 CPU cores
#SBATCH --mem=32G                    # 16 GB total memory
#SBATCH --time=8:00:00
#SBATCH --output=/mnt/vstor/courses/csds447/dxc830/log/qwen_%j.out
#SBATCH --error=/mnt/vstor/courses/csds447/dxc830/log/qwen_%j.err
#SBATCH --mail-user=dxc830@case.edu
#SBATCH --mail-type=BEGIN,END,FAIL

module load singularity

# ---- Paths ----
SIF_IMAGE=/mnt/vstor/courses/csds447/dxc830/transformers_base.sif
WORKDIR=/mnt/vstor/courses/csds447/dxc830/etfall

# ---- Ensure log directory exists ----
mkdir -p /mnt/vstor/courses/csds447/dxc830/log

# ---- Run job ----
cd $WORKDIR

echo "Starting translating ..."
singularity exec --nv $SIF_IMAGE python $WORKDIR/mitigation/finetune/toxigen_translator.py

